<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Giovanni Bernini - Desenvolvedor Web">
  <meta name="author" content>
  <meta name="theme-color" content="#354b72">
  <link rel="icon" href="/img/favicon.ico">
  <title>Giovanni Bernini</title>

  <link rel="stylesheet" href="/css/style.css">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body>
  <nav class="nav-bar">
  <div class="navitem"><a href="/"><img class="small" src="/img/gicon.png" alt="Logo do blog"></a></div>

  <div class="navitem main">
    
      
        <a class="item" href="/categorias/artigos">Artigos</a>
      
    
      
        <div class="navitem -featured">
          <a href="/">Home</a>
        </div>
      
    
      
        <a class="item" href="/categorias/projetos">Projetos</a>
      
    
  </div>

  <div class="navitem"><a class="navButton" onclick="openNav()">&#9776;</a></div>
</nav>

<div class="side-nav">
  <div class="navitem -submenu">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">Fechar Menu</a>
  </div>
  
    <div class="navitem -submenu">
      <a href="/">Home</a>
    </div>
  
    <div class="navitem -submenu">
      <a href="/categorias/artigos">Artigos</a>
    </div>
  
    <div class="navitem -submenu">
      <a href="/categorias/projetos">Projetos</a>
    </div>
  
    <div class="navitem -submenu">
      <a href="/about">Sobre mim</a>
    </div>
  
    <div class="navitem -submenu">
      <a href="/atom.xml">Feed</a>
    </div>
  
</div>
<div class="overlay"></div>



  
    <div class="header --post">
  <div class="post-header">
    <h1 class="title">Transformando uma aplicação React em um aplicativo nativo (Parte 1)</h1>
    <h3 class="subtitle">A origem do problema em questão e como resolvemos.</h3>
  </div>
</div>

  

  
    <section class="main --post">
  

    <section class="content">
        <div class="blog-post">
  <!-- Content -->
  <p><em>Separei esse artigo em duas partes. A primeira que você está lendo agora trata-se da origem do problema em questão e como resolvemos. Na outra parte entro mais afundo e crio do zero essa estrutura explicando passo a passo.</em></p>
<p>Alguns meses atrás, por causa de uma necessidade aqui na Red Ventures (onde trabalho atualmente), me deparei com essa pergunta:</p>
<blockquote>
<h1 id="Como-transformar-uma-aplicacao-React-em-um-aplicativo-iOS-e-Android-de-uma-maneira-rapida-que-aproveite-o-codebase-atual-e-seja-escalavel"><a href="#Como-transformar-uma-aplicacao-React-em-um-aplicativo-iOS-e-Android-de-uma-maneira-rapida-que-aproveite-o-codebase-atual-e-seja-escalavel" class="headerlink" title="Como transformar uma aplicação React em um aplicativo (iOS e Android) de uma maneira rápida, que aproveite o codebase atual e seja escalável?"></a>Como transformar uma aplicação React em um aplicativo (iOS e Android) de uma maneira rápida, que aproveite o codebase atual e seja escalável?</h1></blockquote>
<p>Logo de cara, notamos que seria necessário usar um <em>browser</em> para renderizar a aplicação já existente e alguma ferramenta para gerar tanto o aplicativo Android como o iOS com a mesma codebase, mas ainda existiam algumas dúvidas:</p>
<ul>
<li><p>A aplicação está em constante mudança. Desse modo, faz sentido uma soluçao como Cordova/Phonegap, que para qualquer alteração seria necessário soltar uma atualização na loja?</p>
</li>
<li><p>Caso a aplicação tenha engajamento, como faremos para escalar para um aplicativo nativo sem precisar matar tudo de uma vez e começar do zero? Como faremos essa transição gradual caso for preciso?</p>
</li>
</ul>
<h2 id="Testando-solucoes"><a href="#Testando-solucoes" class="headerlink" title="Testando soluções"></a>Testando soluções</h2><p>A partir daí, comecei a realizar algumas pesquisas e fazer algumas POC’s.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/0*hC1TjdmGFkZNFYEk" alt></p>
<p>Por não facilitar a atualização do aplicativo e não ser escalável para uma experiência nativa, concluímos em não seguir com Cordova/Phonegap, mas ir para um caminho que tivesse esses benefícios. Porém, nossa aplicação web, apesar de já estar preparada para uso mobile, ainda precisava de alguns ajustes para o uso em aplicativo, como por exemplo uma tela inicial específica.</p>
<p>Então resolvemos gerar duas aplicações com o mesmo processo de build existente da aplicação web, por exemplo:</p>
<blockquote>
<p><em>Aplicação já existente: <a href="https://meusite.com.br/" target="_blank" rel="noopener">https://meusite.com.br/</a></em><br><em>Nova aplicação: <a href="https://meusite.com.br/app/" target="_blank" rel="noopener">https://meusite.com.br/app/</a></em></p>
</blockquote>
<p>As duas aplicações seguiram exatamente com o mesmo codebase, a única diferença foi a necessidade de disponibilizar uma variável global dentro da aplicação em tempo de <em>build</em> informando o valor “App” ou “Web”, o que na prática foi só adicionar mais um passo no processo de <em>build/deploy</em>. Com isso foi possível criar condições como qual tela inicial mostrar.</p>
<h2 id="React-Native"><a href="#React-Native" class="headerlink" title="React Native"></a>React Native</h2><p><img src="https://cdn-images-1.medium.com/max/2000/0*NgtuJZI8475e7pa0.png" alt></p>
<p>Com a parte web resolvida e depois de alguns outros testes, decidi fazer uma POC com React Native (uma ferramenta do Facebook que muita gente conhece ou já ouviu falar), pois resolveria o problema da geração do app para Android e iOS e eu já tinha um conhecimento básico prévio. Em menos de uma hora, a POC já tinha atendido quase todas as necessidades, mas ainda faltava uma coisa para fechar a solução: a comunicação entre o nativo e o <em>browser.</em></p>
<p>Olhando a documentação da ferramenta, descobri que quando o React Native monta um componente WebView, ele sempre injeta um método chamado ReactNativeWebView.postMessageno window da página que foi carregada, dessa maneira eu consegui fazer minha aplicação web passar informações para o nativo e vice-versa.</p>
<p>Olha só essa lista de coisas que foram possíveis fazer por causa dessa comunicação:</p>
<ul>
<li><p>Escalabilidade. Posso agora ter em paralelo tanto telas nativas feitas diretamente no React Native como telas da aplicação web</p>
</li>
<li><p>Escutar o evento de backPressque é disparado quando o botão de voltar do celular é acionado</p>
</li>
<li><p>Usar o push notification</p>
</li>
<li><p>Usar as <em>features</em> de biometria, como o <em>faceId</em></p>
</li>
<li><p>Executar qualquer outra função nativa</p>
</li>
</ul>
<h2 id="Conclusao"><a href="#Conclusao" class="headerlink" title="Conclusão"></a>Conclusão</h2><p><img src="https://cdn-images-1.medium.com/max/2000/0*Mn6YEQbshFyZopQp" alt></p>
<p>Essa solução resolveu muito bem o problema e espero que ajude na criação de novas soluções para quem está lendo!</p>
<p>Vou deixar abaixo o link para o próximo post, onde irei mostrar como construir do zero, passo a passo, toda a estrutura que eu descrevi ao longo desse artigo, com uma aplicação web que utilizará React, mas que pode ter como base qualquer outra biblioteca ou até mesmo vanilla.</p>
<p><a href="/transformando-uma-aplicacao-react-em-um-aplicativo-nativo-parte-2">Próximo post</a></p>

  <!-- https://www.facebook.com/sharer/sharer.php?u=https://giovannibernini.com.br -->
  <!-- Comments -->
  
    <div class="blog-post-comments">
        <h3>Comments:</h3>
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>

</div>

    </section>

    <footer class="footer">
    <p class="footer-content">Feito com Hexo</p>
</footer>

<script src="/js/index.js"></script>



<script src="/js/parallax.js"></script>

  </section>

  <!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'giovanni-bernini';
        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
